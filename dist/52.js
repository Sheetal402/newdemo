"use strict";(self.webpackChunkpd_free_angularcli=self.webpackChunkpd_free_angularcli||[]).push([[52],{9052:(H,h,s)=>{s.r(h),s.d(h,{AdminLayoutModule:()=>R});var p=s(1083),f=s(9808),i=s(3075),t=s(5e3),d=s(2342);let v=(()=>{class n{constructor(e,o){this.router=e,this.taskService=o,this.userData=[],console.log(18,"inside dashboard constructor")}ngOnInit(){console.log(19,"inside dashboard component"),this.taskService.getUsers().subscribe(e=>{console.log(987,"data = ",e),this.userData=e})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(p.F0),t.Y36(d.M))},n.\u0275cmp=t.Xpm({type:n,selectors:[["dashboard-cmp"]],decls:14,vars:1,consts:[[1,"row"],[1,"col-lg-3","col-md-6","col-sm-6"],[1,"card","card-stats"],[1,"card-body"],[1,"col-5","col-md-4"],[1,"icon-big","text-center","icon-warning"],[1,"nc-icon","nc-globe","text-warning"],[1,"col-7","col-md-8"],[1,"numbers"],[1,"card-category"],[1,"card-title"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",0)(5,"div",4)(6,"div",5),t._UZ(7,"i",6),t.qZA()(),t.TgZ(8,"div",7)(9,"div",8)(10,"p",9),t._uU(11,"Students"),t.qZA(),t.TgZ(12,"p",10),t._uU(13),t.qZA()()()()()()()()),2&e&&(t.xp6(13),t.Oqu(o.userData.length))},encapsulation:2}),n})();var T=s(655),Z=s(520);let y=(()=>{class n{constructor(e,o,r){this.taskService=e,this.http=o,this.router=r}ngOnInit(){return(0,T.mG)(this,void 0,void 0,function*(){this.initRegistrationForm(),console.log(13,"inside user component"),yield this.taskService.getLoggedUser().subscribe(e=>{console.log(336699,"data in user = ",e),this.userData=e,this.userData.profilepic=this.taskService.ROOT_URL+"/"+this.userData.profilepic,this.updateUserForm.patchValue(this.userData)})})}initRegistrationForm(){this.updateUserForm=new i.cw({fname:new i.NI("",[i.kI.required,i.kI.minLength(3),i.kI.maxLength(50),i.kI.pattern("[a-zA-Z][a-zA-Z ]+")]),lname:new i.NI("",[i.kI.required,i.kI.minLength(1),i.kI.maxLength(50),i.kI.pattern("[a-zA-Z][a-zA-Z ]+")]),address:new i.NI("",[i.kI.required,i.kI.minLength(5),i.kI.maxLength(255)]),profilepic:new i.NI(""),img:new i.NI(""),contact:new i.NI("",[i.kI.required,i.kI.minLength(10)]),email:new i.NI("",[i.kI.required,i.kI.minLength(5),i.kI.maxLength(255),i.kI.pattern("[a-z0-9._%+-]+@[a-z0-9.-]+.[a-z]{2,4}$")]),password:new i.NI("",[i.kI.required,i.kI.minLength(8),i.kI.maxLength(1024),i.kI.pattern("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*_=+-]).{8,12}$")]),cpassword:new i.NI("",[i.kI.required,i.kI.minLength(8),i.kI.maxLength(1024),i.kI.pattern("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*_=+-]).{8,12}$")])})}onFileSelected(e){this.profilepic=e.target.files[0],console.log("profile pic update= ",this.profilepic),console.log("profile pic update= ",this.updateUserForm.value),this.reload()}reload(){const e=new FormData;e.append("profilepic",this.profilepic),console.log("%%form data = ",e),this.taskService.updateProfilepic(this.userData._id,e).subscribe(o=>{console.log("res from service in user: ",o),o&&this.taskService.getLoggedUser().subscribe(r=>{console.log(336690,"data in user = ",r),this.userData=r,console.log(336694,"userdatadata in user = ",this.userData),this.updateUserForm.patchValue(this.userData)})})}submit(e){console.log("inside submit()"),console.log(321,"data b4 api call",e),console.log(321,"updateUserForm b4 api call",this.updateUserForm);const o=new FormData;o.append("fname",e.fname),o.append("lname",e.lname),o.append("address",e.address),o.append("profilepic",this.profilepic),o.append("contact",e.contact),o.append("email",e.email),o.append("password",this.userData.password),o.append("cpassword",this.userData.cpassword),console.log("%%form data = ",o),this.taskService.updateUsers(this.userData._id,o).subscribe(r=>{console.log("res from service in user: ",r),r&&this.taskService.getLoggedUser().subscribe(c=>{console.log(336691,"data in user = ",c),this.userData=c,this.updateUserForm.patchValue(this.userData)})})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(d.M),t.Y36(Z.eN),t.Y36(p.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["user-cmp"]],decls:49,vars:2,consts:[[1,"row"],[1,"col-md-12"],[1,"card","card-user"],[1,"card-header"],[1,"card-title"],[1,"card-body"],["enctype","multipart/form-data",3,"formGroup","ngSubmit"],[1,"col-md-6","pr-1"],[1,"form-group"],["type","text","formControlName","fname","id","fname",1,"form-control"],[1,"col-md-6","pl-1"],["type","text","formControlName","lname","id","lname",1,"form-control"],["type","text","formControlName","address","id","address",1,"form-control"],["id","img","alt","profilePic",1,"image-style",3,"src"],[1,"image-button-upload","display-none"],["type","file","id","profilepic","placeholder","Profile Picture",1,"form-control",3,"change"],["type","button",1,"btn","btn-success","btn-round","ml-15",3,"click"],["type","text","formControlName","contact","id","contact",1,"form-control"],["for","exampleInputEmail1"],["type","email","formControlName","email","id","email","disabled","",1,"form-control"],[1,"update","ml-auto","mr-auto"],["type","submit",1,"btn","btn-primary","btn-round"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h5",4),t._uU(5,"Update Student Profile"),t.qZA()(),t.TgZ(6,"div",5)(7,"form",6),t.NdJ("ngSubmit",function(){return o.submit(o.updateUserForm.value)}),t.TgZ(8,"div",0)(9,"div",7)(10,"div",8)(11,"label"),t._uU(12,"First Name*"),t.qZA(),t._UZ(13,"input",9),t.qZA()(),t.TgZ(14,"div",10)(15,"div",8)(16,"label"),t._uU(17,"Last Name*"),t.qZA(),t._UZ(18,"input",11),t.qZA()()(),t.TgZ(19,"div",0)(20,"div",1)(21,"div",8)(22,"label"),t._uU(23,"Address*"),t.qZA(),t._UZ(24,"input",12),t.qZA()()(),t.TgZ(25,"div",0)(26,"div",1)(27,"div",8),t._UZ(28,"img",13),t.TgZ(29,"label",14),t._uU(30,"Select file"),t.qZA(),t.TgZ(31,"input",15),t.NdJ("change",function(c){return o.onFileSelected(c)}),t.qZA(),t.TgZ(32,"button",16),t.NdJ("click",function(){return o.reload()}),t._uU(33,"upload"),t.qZA()()()(),t.TgZ(34,"div",0)(35,"div",7)(36,"div",8)(37,"label"),t._uU(38,"Contact Number*"),t.qZA(),t._UZ(39,"input",17),t.qZA()(),t.TgZ(40,"div",10)(41,"div",8)(42,"label",18),t._uU(43,"Email address*"),t.qZA(),t._UZ(44,"input",19),t.qZA()()(),t.TgZ(45,"div",0)(46,"div",20)(47,"button",21),t._uU(48,"Update"),t.qZA()()()()()()()()),2&e&&(t.xp6(7),t.Q6J("formGroup",o.updateUserForm),t.xp6(21),t.Q6J("src",o.userData.profilepic,t.LSH))},directives:[i._Y,i.JL,i.sg,i.Fj,i.JJ,i.u],styles:[".image-style[_ngcontent-%COMP%]{border-radius:50%;width:100px}.image-button-upload[_ngcontent-%COMP%]{border-style:solid;border-radius:10px;margin-left:10px;background-color:#7fffd4}.display-none[_ngcontent-%COMP%]{display:none}.ml-15[_ngcontent-%COMP%]{margin-left:15px}"]}),n})();var u=s(2426),m=s(4999);function U(n,a){1&n&&(t.TgZ(0,"th",12),t._uU(1," First Name "),t.qZA())}function x(n,a){if(1&n&&(t.TgZ(0,"td",13),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.hij(" ",e.fname," ")}}function k(n,a){1&n&&(t.TgZ(0,"th",12),t._uU(1," Last Name "),t.qZA())}function A(n,a){if(1&n&&(t.TgZ(0,"td",13),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.hij(" ",e.lname," ")}}function S(n,a){1&n&&(t.TgZ(0,"th",12),t._uU(1," Address "),t.qZA())}function I(n,a){if(1&n&&(t.TgZ(0,"td",13),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.hij(" ",e.address," ")}}function N(n,a){1&n&&(t.TgZ(0,"th",12),t._uU(1," Contact "),t.qZA())}function w(n,a){if(1&n&&(t.TgZ(0,"td",13),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.hij(" ",e.contact,"")}}function D(n,a){1&n&&t._UZ(0,"tr",14)}function F(n,a){1&n&&t._UZ(0,"tr",15)}let M=(()=>{class n{constructor(e){this.taskService=e,this.userData=[],this.colunmsToDisplay=["fname","lname","address","contact"],this.dataSource=new m.by,this.totalRows=0,this.pageSize=3,this.currentPage=1,this.pageSizeOptions=[3,6,9]}ngAfterViewInit(){this.dataSource.paginator=this.paginator,console.log("#$% datasource.paginator = ",this.dataSource.paginator)}ngOnInit(){console.log(11,"inside table component"),this.loadData()}loadData(){this.taskService.getTableData(this.currentPage,this.pageSize).subscribe(o=>{this.dataSource.data=o,setTimeout(()=>{this.paginator.pageIndex=this.currentPage,this.paginator.length=o.length})})}pageChanged(e){this.pageSize=e.pageSize,this.currentPage=e.pageIndex,this.loadData()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(d.M))},n.\u0275cmp=t.Xpm({type:n,selectors:[["table-cmp"]],viewQuery:function(e,o){if(1&e&&t.Gf(u.NW,5),2&e){let r;t.iGM(r=t.CRH())&&(o.paginator=r.first)}},decls:18,vars:7,consts:[[1,"mat-elevation-z8"],["mat-table","",3,"dataSource"],["matColumnDef","fname"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","lname"],["matColumnDef","address"],["matColumnDef","contact"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["aria-label","Select page",3,"length","pageIndex","pageSize","pageSizeOptions","page"],["paginator",""],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"table",1),t.ynx(2,2),t.YNc(3,U,2,0,"th",3),t.YNc(4,x,2,1,"td",4),t.BQk(),t.ynx(5,5),t.YNc(6,k,2,0,"th",3),t.YNc(7,A,2,1,"td",4),t.BQk(),t.ynx(8,6),t.YNc(9,S,2,0,"th",3),t.YNc(10,I,2,1,"td",4),t.BQk(),t.ynx(11,7),t.YNc(12,N,2,0,"th",3),t.YNc(13,w,2,1,"td",4),t.BQk(),t.YNc(14,D,1,0,"tr",8),t.YNc(15,F,1,0,"tr",9),t.qZA(),t.TgZ(16,"mat-paginator",10,11),t.NdJ("page",function(c){return o.pageChanged(c)}),t.qZA()()),2&e&&(t.xp6(1),t.Q6J("dataSource",o.dataSource),t.xp6(13),t.Q6J("matHeaderRowDef",o.colunmsToDisplay),t.xp6(1),t.Q6J("matRowDefColumns",o.colunmsToDisplay),t.xp6(1),t.Q6J("length",o.totalRows)("pageIndex",o.currentPage)("pageSize",o.pageSize)("pageSizeOptions",o.pageSizeOptions))},directives:[m.BZ,m.w1,m.fO,m.ge,m.Dz,m.ev,m.as,m.XQ,m.nj,m.Gk,u.NW],styles:["table[_ngcontent-%COMP%]{width:100%}"]}),n})();var l=s(8966),C=s(7423);let P=(()=>{class n{constructor(e,o,r,c){this.data=e,this.dialogRef=o,this.taskService=r,this.router=c}ngOnInit(){}onClose(){this.dialogRef.close()}onOk(){this.taskService.deleteComments(this.data._id),this.dialogRef.close()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(l.WI),t.Y36(l.so),t.Y36(d.M),t.Y36(p.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-popup"]],decls:8,vars:1,consts:[["mat-dialog-title","",3,"innerHTML"],["mat-dialog-actions",""],["mat-button","","color","primary",3,"click"]],template:function(e,o){1&e&&(t._UZ(0,"h1",0),t.TgZ(1,"mat-dialog-content"),t._uU(2,"Are you sure you want to delete above comment?"),t.qZA(),t.TgZ(3,"div",1)(4,"button",2),t.NdJ("click",function(){return o.onOk()}),t._uU(5,"Delete"),t.qZA(),t.TgZ(6,"button",2),t.NdJ("click",function(){return o.onClose()}),t._uU(7,"Cancel"),t.qZA()()),2&e&&t.Q6J("innerHTML",o.data.content,t.oJD)},directives:[l.uh,l.xY,l.H8,C.lW],styles:[".editComment>mat-dialog-container{background-color:#add8e6;border-radius:10px}mat-dialog-content[_ngcontent-%COMP%]{padding:20px}div[_ngcontent-%COMP%]{justify-content:space-evenly}"]}),n})(),J=(()=>{class n{constructor(e,o,r,c){this.data=e,this.taskService=o,this.dialogRef=r,this.router=c}ngOnInit(){this.initForm(),this.data.content=this.data.content.replace(/<br\s*[\/]?>/gi,"\n"),this.updateCommentForm.patchValue(this.data)}initForm(){this.updateCommentForm=new i.cw({content:new i.NI("")})}onUpdate(e){e.content=e.content.replace(/(?:\r\n|\r|\n)/g,"<br/>"),this.taskService.updateComments(this.data._id,e.content),this.dialogRef.close()}onNoClick(){this.dialogRef.close()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(l.WI),t.Y36(d.M),t.Y36(l.so),t.Y36(p.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-editcomment"]],decls:10,vars:2,consts:[[3,"formGroup","ngSubmit"],["mat-dialog-title",""],["type","text","formControlName","content",3,"innerHTML"],["mat-dialog-actions",""],["type","submit","mat-button","","color","primary"],["mat-button","","color","primary",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return o.onUpdate(o.updateCommentForm.value)}),t.TgZ(1,"h1",1),t._uU(2,"Enter new comment here!!!"),t.qZA(),t.TgZ(3,"mat-dialog-content"),t._UZ(4,"textarea",2),t.qZA(),t.TgZ(5,"div",3)(6,"button",4),t._uU(7,"Update"),t.qZA(),t.TgZ(8,"button",5),t.NdJ("click",function(){return o.onNoClick()}),t._uU(9,"Cancel"),t.qZA()()()),2&e&&(t.Q6J("formGroup",o.updateCommentForm),t.xp6(4),t.Q6J("innerHTML",o.data.content,t.oJD))},directives:[i._Y,i.JL,i.sg,l.uh,l.xY,i.Fj,i.JJ,i.u,l.H8,C.lW],styles:[".editComment>mat-dialog-container{background-color:#add8e6;height:250px;border-radius:10px}mat-dialog-content[_ngcontent-%COMP%]{padding:20px;margin-left:23px}div[_ngcontent-%COMP%]{justify-content:space-evenly}"]}),n})();var b=s(5245),_=s(3189);function O(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"div",20)(2,"div",21)(3,"div",22),t._UZ(4,"span",23),t.qZA()(),t.TgZ(5,"div",24)(6,"span",25),t.NdJ("click",function(){const c=t.CHM(e).$implicit;return t.oxw().edit(c)}),t.TgZ(7,"mat-icon"),t._uU(8,"create icon"),t.qZA()(),t.TgZ(9,"span",25),t.NdJ("click",function(){const c=t.CHM(e).$implicit;return t.oxw().deleteComment(c)}),t.TgZ(10,"mat-icon"),t._uU(11,"delete"),t.qZA()()()()()}if(2&n){const e=a.$implicit;t.Gre("todo ",e.completed?"done":"",""),t.xp6(4),t.Q6J("innerHTML",e.content,t.oJD)}}const q=[{path:"dashboard",component:v},{path:"user",component:y},{path:"table",component:M},{path:"todo",component:(()=>{class n{constructor(e,o){this.taskService=e,this.dialog=o,this.inputTodo="",this.title="todo app"}ngOnInit(){this.initForm(),this.taskService.getComments().subscribe(e=>{console.log("~~~!!! comment from onInit = ",e),this.todos=e})}initForm(){this.commentForm=new i.cw({inputTodo:new i.NI("",i.kI.required)})}submit(e){console.log("create todo data = ",e),e=(e=e.inputTodo).replace(/(?:\r\n|\r|\n)/g,"<br/>"),console.log("after replace todo data = ",e),this.taskService.createComments(e),this.taskService.getComments().subscribe(r=>{console.log("~~~!!! comment from submit = ",r),this.todos=r})}edit(e){const o=J;console.log("%%% item in edit = ",e),this.openDialog(e,o)}deleteComment(e){const o=P;console.log("%%% item = ",e),this.openDialog(e,o)}openDialog(e,o){const r=new l.vA;r.disableClose=!0,r.autoFocus=!0,this.dialog.open(o,{data:{content:e.content,_id:e._id},panelClass:"editComment",disableClose:!0}).afterClosed().subscribe(g=>{console.log("The dialog was closed. result = ",g),this.taskService.getComments().subscribe(Q=>{this.todos=Q})})}searchItemLength(e){console.log(5599,"value = ",e.length),console.log(5600,"search text = ",this.searchText),e.length>=3&&(this.searchText=e,this.taskService.searchComment(this.searchText).subscribe(o=>{console.log("data in search comments = ",o),this.todos=o}))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(d.M),t.Y36(l.uw))},n.\u0275cmp=t.Xpm({type:n,selectors:[["comment-cmp"]],decls:27,vars:7,consts:[[1,"row"],[1,"col-md-12"],[1,"card","card-user"],[1,"card-header"],[1,"card-title","ta-center"],[1,"card-body"],[1,"row","flex-center"],[1,"col-md-6"],[3,"formGroup","ngSubmit"],[1,"col-md-10"],[1,"form-group"],["formControlName","inputTodo","id","comment","placeholder","Add a comment","value","",1,"form-control","height-width"],["type","submit",1,"btn","btn-primary","btn-round",3,"disabled"],[1,"input-group","no-border"],["type","text","name","search","id","search","placeholder","Search...","autocomplete","off",1,"form-control",3,"ngModel","ngModelChange"],[1,"input-group-append"],[1,"input-group-text"],[1,"nc-icon","nc-zoom-split"],[1,"flex-center"],[3,"class",4,"ngFor","ngForOf"],[1,"row","PB-5","flex-center","flex-display"],[1,"col-md-8"],[1,"comment-border","P-5","text-wrap"],[3,"innerHTML"],[1,"flex-display","direction-column","PT-6"],["type","button",2,"background-color","transparent","border","none","color","aqua",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),t._uU(5,"Comment Section"),t.qZA()(),t.TgZ(6,"div",5)(7,"div",6)(8,"div",7)(9,"form",8),t.NdJ("ngSubmit",function(){return o.submit(o.commentForm.value)}),t.TgZ(10,"div",6)(11,"div",9)(12,"div",10),t._UZ(13,"textarea",11),t.qZA()()(),t.TgZ(14,"div",6)(15,"div",7)(16,"div",10)(17,"button",12),t._uU(18,"Add comment"),t.qZA()()()()(),t.TgZ(19,"div",13)(20,"input",14),t.NdJ("ngModelChange",function(c){return o.searchText=c}),t.qZA(),t.TgZ(21,"div",15)(22,"div",16),t._UZ(23,"i",17),t.qZA()()()()(),t.TgZ(24,"div",18),t.YNc(25,O,12,4,"div",19),t.ALo(26,"filter"),t.qZA()()()()()),2&e&&(t.xp6(9),t.Q6J("formGroup",o.commentForm),t.xp6(8),t.Q6J("disabled",o.commentForm.invalid),t.xp6(3),t.Q6J("ngModel",o.searchText),t.xp6(5),t.Q6J("ngForOf",t.xi3(26,4,o.todos,o.searchText)))},directives:[i._Y,i.JL,i.sg,i.Fj,i.JJ,i.u,i.On,f.sg,b.Hw],pipes:[_.Z],styles:[".mystyle[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{border-radius:10px}.ta-center[_ngcontent-%COMP%]{text-align:center}.pr-5[_ngcontent-%COMP%]{padding-right:5px}.PB-5[_ngcontent-%COMP%]{padding-bottom:5px}.flex-display[_ngcontent-%COMP%]{display:flex}.flex-center[_ngcontent-%COMP%]{justify-content:center}.direction-column[_ngcontent-%COMP%]{flex-direction:column}.comment-border[_ngcontent-%COMP%]{border-style:none none none solid;background-color:#f0f8ff;border-color:#008b8b;height:70px}.MT-15[_ngcontent-%COMP%]{margin-top:15px}.P-5[_ngcontent-%COMP%]{padding:5px}.PT-6[_ngcontent-%COMP%]{padding-top:6px}"]}),n})()}];var L=s(5610),Y=s(7322),z=s(7531);let R=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[f.ez,p.Bz.forChild(q),i.u5,i.UX,L.IJ,m.p0,Y.lN,z.c,l.Is,b.Ps,u.TU,_.h],u.TU]}),n})()}}]);